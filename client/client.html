<!DOCTYPE html>
<html lang="en">
<head>
  <title>Book Collecter: Project 1 IGME-430</title>
  <link rel="stylesheet" type="text/css" href="/style.css">
  
  <script>
    const init = () => {
      const usernameForm = document.querySelector('#usernameForm');
      //localStorage.setItem("usernames",JSON.stringify([]));
      
      const addUserLS = (e) => {
        e.preventDefault(); // stops form from sending request on it's own
        const newUserName = usernameForm.querySelector('#usernameField').value;
        // const storedUsernames = JSON.parse(localStorage.getItem("usernames"));
        // if(!storedUsernames.includes(newUserName)){
        //   localStorage.setItem('usernames', JSON.stringify([...storedUsernames, newUserName]));
        // }
        localStorage.setItem('username', newUserName); 
        window.open('/collection', '_self');
      }

      usernameForm.addEventListener('submit', addUserLS);
    };

    window.onload = init;
  </script>
</head>
<body>
  <section id="top">
    <h3>Add to your Book Collection!</h3>

    <h4>Enter a username</h4>
    <form id="usernameForm" action="/addUserLS" method="post">
      <label for="username">Username: </label>
      <input id="usernameField" type="text" name="usernameField" />
      <input type="submit" value="Submit" />
    </form>

  </section>
  <section id="content">
  </section>
</body>
</html>
